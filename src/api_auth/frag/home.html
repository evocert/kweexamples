<div>
	<div>Home</div><br/>
	<div>
		<button id="acc_notok">acc[-tok]</button>
		<button id="acc_invalidtok">acc[!tok]</button>
		<button id="acc_tok">acc[+tok]</button>
		<button id="logout">logout</button>
	</div><br/>
	<div>Session</div><br/>
	<div>[[print(JSON.stringify(prsng.session));]]</div><br/>
	<div>Status</div><br/>
	[[if(prsng.status){]]
		<div class="status">[[print(prsng.status);]]</div><br/>
	[[}]]
</div>
<script>
	prsng.target.find("#acc_notok").click(function(el){
		$.ajax({
			method:"post",
			url:"./api/?"+$.param({"cmd":"acc"}),
			contentType:"application/json; charset=utf-8",
			headers:{
			},
			data:JSON.stringify({}),
			success:function(r){
				prsng.status=JSON.stringify(r);
				render(prsng);
			}.bind(this),
			error:function(e){
				alert(JSON.stringify(r));
			}.bind(this)
		});
	}.bind(this));
	prsng.target.find("#acc_invalidtok").click(function(el){
		$.ajax({
			method:"post",
			url:"./api/?"+$.param({"cmd":"acc"}),
			contentType:"application/json; charset=utf-8",
			headers:{
				"x-req-token":1234
			},
			data:JSON.stringify({}),
			success:function(r){
				prsng.status=JSON.stringify(r);
				render(prsng);
			}.bind(this),
			error:function(e){
				alert(JSON.stringify(r));
			}.bind(this)
		});
	}.bind(this));
	prsng.target.find("#acc_tok").click(function(el){
		$.ajax({
			method:"post",
			url:"./api/?"+$.param({"cmd":"acc"}),
			contentType:"application/json; charset=utf-8",
			headers:{
				"x-req-token":prsng.session.tok,
			},
			data:JSON.stringify({}),
			success:function(r){
				prsng.status=JSON.stringify(r);
				render(prsng);
			}.bind(this),
			error:function(e){
				alert(JSON.stringify(r));
			}.bind(this)
		});
	}.bind(this));
	prsng.target.find("#logout").click(function(el){
		$.ajax({
			method:"post",
			url:"./api/?"+$.param({"cmd":"logout"}),
			contentType:"application/json; charset=utf-8",
			headers:{"x-req-token":prsng.session.tok,},
			data:JSON.stringify({"tok":prsng.session.tok}),
			success:function(r){
				if(r.error){
					prsng.status=JSON.stringify(r);
					render(prsng);
				}else{
					prsng.logout();
				}
			}.bind(this),
			error:function(e){
				alert(JSON.stringify(r));
			}.bind(this)
		});
	}.bind(this));
</script>
